{% extends "app/layout.html" %}

{% block content %}
<h1>Cart</h1>
<table width="100%">
    <tr>
        <th>Product</th>
        <th>Quantity</th>
        <th>Unit Price</th>
        <th>Total</th>
        <th></th>
    </tr>
    {% for obj in cartItems %}
<tr>
    <td>
        <img src="{{ obj.product.image.url }}" height="100" />
    </td>
    <td>
        <form method="post" action="/update_cart_item">
            {% csrf_token %}
            <input type="hidden" name="cart_item_id" value="{{ obj.id }}" />
            <input type="text" name="quantity" value="{{obj.quantity}}" />
            <button class="btn btn-outline-warning my-2 my-sm-0">Save</button>
        </form>
    </td>
    <td>${{ obj.unit_price }}</td>
    <td>
        ${{ obj.total }}
    </td>
    <td>
        <form method="post" action="/remove_cart_item">
            {% csrf_token %}
            <input type="hidden" name="cart_item_id" value="{{ obj.id }}" />
            <button type="submit" class="btn btn-outline-danger my-2 my-sm-0">Remove</button>
        </form>
    </td>
    <td>
        <form method="post" action="/update_cart_item">
            {% csrf_token %}
            <input type="hidden" name="cart_item_id" value="{{ obj.id }}" />
        </form>
    </td>
</tr>
    {% endfor %}
<tr>
    <th colspan="3" style="text-align:right;">
        Grand Total:
    </th>
    <td>${{ grand_total }}</td>
    <td></td>
</tr>
</table>
<hr />
<a href="/checkout" class="btn btn-outline-success my-2 my-sm-0">Checkout</a>
{% endblock %}
